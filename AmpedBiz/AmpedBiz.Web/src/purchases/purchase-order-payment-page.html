<template>

  <!-- payments -->
  <table class="table table-striped table-hover table-condensed">

    <thead>
      <tr>
        <th class="col-sm-1">Action</th>
        <th class="col-sm-2">Paid By</th>
        <th class="col-sm-2">Paid On</th>
        <th class="col-sm-2">Type</th>
        <th class="col-sm-2 text-right">Amount</th>
      </tr>
    </thead>

    <tbody>
      <tr repeat.for="item of paymentPager.items">
        <td>
          <a href="javascript:undefined" class="text-info" click.delegate="editItem(item)">
            <i class="fa fa-pencil"></i>
          </a>
          <a href="javascript:undefined" class="text-danger" click.delegate="deleteItem(item)">
            <i class="fa fa-times"></i>
          </a>
        </td>

        <!-- read-only mode -->
        <td if.bind="$parent.selectedItem != item">${item.paidBy.name}</td>
        <td if.bind="$parent.selectedItem != item">${item.paidOn | dateFormat}</td>
        <td if.bind="$parent.selectedItem != item">${item.paymentType.name}</td>
        <td if.bind="$parent.selectedItem != item" class="text-right">${item.paymentAmount | numberFormat}</td>

        <!-- edit mode -->
        <td if.bind="$parent.selectedItem == item">${item.paidBy.name}</td>

        <td if.bind="$parent.selectedItem === item">
          <div class="row">
            <div class="col-xs-12">
              <input type="date" class="form-control datepicker" placeholder="Paid On" value.bind="item.paidOn | dateInputFormat" />
            </div>
          </div>
        </td>

        <td if.bind="$parent.selectedItem === item" class="text-right">
          <div class="row">
            <div class="col-xs-12 pull-right">
              <select class="form-control input-xs" value.bind="item.paymentType | lookupToId:$parent.paymentTypes">
                <option>Select Payment Type</option>
                <option repeat.for="paymentType of $parent.paymentTypes" model.bind="paymentType.id">${paymentType.name}</option>
              </select>
            </div>
          </div>
        </td>

        <td if.bind="$parent.selectedItem === item" class="text-right">
          <div class="row">
            <div class="col-xs-12 pull-right">
              <input class="form-control input-xs text-right" type="number" value.bind="item.paymentAmount" />
            </div>
          </div>
        </td>

      </tr>
    </tbody>

  </table>

  <!-- pager -->
  <pager current-page.bind="paymentPager.offset" total-items.bind="paymentPager.count" change.delegate="paymentPager.doPage($event)"
  />

</template>