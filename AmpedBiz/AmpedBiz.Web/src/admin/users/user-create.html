<template>

  <require from="common/controls/address-input.html"></require>
  <require from="common/controls/contact-input.html"></require>
  <require from="common/controls/person-input.html"></require>

  <ux-dialog>

    <ux-dialog-header>
      <h3>${header}</h3>
    </ux-dialog-header>

    <ux-dialog-body>

      <div class="panel panel-default">
        <div class="panel-body">
          <form class="form-horizontal" role="form">

            <ul class="nav nav-tabs">
              <li class="active">
                <a data-toggle="tab" href="#info">Info</a>
              </li>
              <li>
                <a data-toggle="tab" href="#address">Address</a>
              </li>
              <li>
                <a data-toggle="tab" href="#roles">Roles</a>
              </li>
            </ul>

            <div class="tab-content">
              <div id="info" class="tab-pane fade in active">
                <br />
                <div class="form-group">
                  <label class="control-label col-sm-4">Username:</label>
                  <div class="col-sm-8">
                    <input type="text" class="form-control" placeholder="Enter Name" value.bind="user.username" />
                  </div>
                </div>
                <div class="form-group">
                  <label class="control-label col-sm-4">Branch:</label>
                  <div class="col-sm-8">
                    <select class="form-control" value.bind="user.branchId">
                      <option>Select a Branch</option>
                      <option repeat.for="branch of branches" model.bind="branch.id">${branch.name}</option>
                    </select>
                  </div>
                </div>

                <person-input person.two-way="user.person" />
              </div>

              <div id="address" class="tab-pane fade">
                <br />
                <address-input address.two-way="user.address" />
              </div>

              <div id="roles" class="tab-pane fade">
                <br />
                <div class="form-group">
                  <template repeat.for="item of user.roles">
                    <div class="checkbox" if.bind="canAssign(item)">
                      <label class="control-label col-sm-2"></label>
                      <label class="col-sm-10">
                      <input type="checkbox" checked.bind="item.assigned" /> ${item.name} 
                    </label>
                    </div>
                  </template>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
    </ux-dialog-body>

    <ux-dialog-footer>
      <button type="button" class="btn btn-primary" click.trigger="save()" disabled.bind="!canSave" attach-focus="true">
        <i class="fa fa-check-circle"></i> Save
      </button>
      <button type="button" class="btn btn-danger" click.trigger="cancel()">
        <i class="fa fa-times-circle"></i> Cancel</button>
    </ux-dialog-footer>

  </ux-dialog>

</template>