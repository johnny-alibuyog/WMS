<template>
  <!--<require from="./common/converters" />-->
  
  <ai-dialog>
    <ai-dialog-header>
      <h3>${header}</h3>
    </ai-dialog-header>
    
    <ai-dialog-body>
      <div class="panel panel-default">
        
        <div class="panel-body">
          <form class="form-horizontal" role="form">
            
            <!-- class -->
            <div class="form-group">
              <label class="control-label col-sm-4">Code:</label>
              <div class="col-sm-8">
                <input type="text" class="form-control" placeholder="Enter Code" value.bind="unitOfMeasureClass.id" disabled.bind="isEdit" />
              </div>
            </div>
            <div class="form-group">
              <label class="control-label col-sm-4">Name:</label>
              <div class="col-sm-8">
                <input type="text" class="form-control" placeholder="Enter Name" value.bind="unitOfMeasureClass.name" />
              </div>
            </div>
            
            <!-- create new -->
            <button type="button" class="btn btn-default" click.delegate="createItem()">
              <i class="fa fa-plus"></i> Create Unit of Measure Class
            </button>            
        
            <!-- units -->
            <div>
              <table class="table table-striped table-hover table-nonfluid">
                <thead>
                  <tr>
                    <th class="col-md-1">Action</th>
                    <th class="col-md-2">Code</th>
                    <th class="col-md-2">Name</th>
                    <th class="col-md-2">Base</th>
                    <th class="col-md-2">Convertion</th>
                  </tr>
                </thead>
                <tbody>
                  <tr repeat.for="item of unitOfMeasureClass.units" click.delegate="editItem(item)">
                    <td>
                      <a href="javascript:undefined" class="text-info" click.delegate="editItem(item)">
                        <i class="fa fa-pencil"></i>
                      </a>
                      <a href="javascript:undefined" class="text-danger" click.delegate="deleteItem(item)">
                        <i class="fa fa-times"></i>
                      </a>
                    </td>
                    
                    <!-- read-only mode -->
                    <td if.bind="$parent.selectedUnit !== item">${item.id}</td>
                    <td if.bind="$parent.selectedUnit !== item">${item.name}</td>
                    <td if.bind="$parent.selectedUnit !== item">${item.isBaseUnit}</td>
                    <td if.bind="$parent.selectedUnit !== item">${item.convertionFactor}</td>

                    <!-- edit mode -->
                    <td if.bind="$parent.selectedUnit === item"><input type="text" value.bind="item.id" /></td>
                    <td if.bind="$parent.selectedUnit === item"><input type="text" value.bind="item.name" /></td>
                    <td if.bind="$parent.selectedUnit === item"><input type="checkbox" checked.bind="item.isBaseUnit" /></td>
                    <td if.bind="$parent.selectedUnit === item"><input class="text-right" type="number" value.bind="item.convertionFactor" /></td>
                  </tr>
                </tbody>
              </table>
            </div>
            
          </form>
        </div>
      </div>
    </ai-dialog-body>

    <ai-dialog-footer>
      <button type="button" class="btn btn-success" click.trigger="save()">
        <i class="fa fa-check-circle"></i> Save
      </button>
      <button type="button" class="btn btn-danger" click.trigger="cancel()">
        <i class="fa fa-times-circle"></i> Cancel</button>
    </ai-dialog-footer>
    
  </ai-dialog>
</template>